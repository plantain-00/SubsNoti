machine:
  node:
    version: 4.1.0

test:
  pre:
    - npm install typescript -g
    - npm install tsd -g
    - npm install gitbook-cli -g
    - tsd install -ros

  override:
    - tsc
    - tsc -p frontends
    - tsc -p backends
    - mocha publish/backends/tests
    - NODE_ENV=production gulp js
    - NODE_ENV=production gulp css
    - NODE_ENV=production gulp rev
    - NODE_ENV=production gulp html
    - NODE_ENV=production gulp doc
    - NODE_ENV=production gulp dot
    - NODE_ENV=production gulp icon