machine:
  node:
    version: 4.1.0

test:
  pre:
    - npm install typescript -g
    - npm install tsd -g
    - npm install gitbook-cli -g
    - tsd install -ros

  override:
    - tsc
    - tsc -p frontends
    - tsc -p backends
    - mocha publish/backends/tests
    - gitbook build doc/api/
    - gulp js --gulpfile frontends/gulpfile.js
    - gulp css --gulpfile frontends/gulpfile.js
    - gulp rev --gulpfile frontends/gulpfile.js
    - gulp html --gulpfile frontends/gulpfile.js